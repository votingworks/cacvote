#!/usr/bin/env node

// @ts-check

require('esbuild-runner/register');

const { join } = require('path');
const { generateConfig, CIRCLECI_CONFIG_PATH } = require('../src/circleci');
const { getWorkspacePackageInfo } = require('../src/pnpm');
const { writeFileSync } = require('fs');

const workspaceRoot = join(__dirname, '..', '..', '..');

writeFileSync(
  CIRCLECI_CONFIG_PATH,
  generateConfig(getWorkspacePackageInfo(workspaceRoot))
);
