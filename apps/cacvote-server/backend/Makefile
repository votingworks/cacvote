ALL: build

clean:
	@echo "ğŸ§¹ Cleaningâ€¦"
	@cargo clean

build:
	@echo "ğŸ› ï¸ Buildingâ€¦"
	@cargo build --release

dist: build
	@echo "ğŸ“¦ Packaging applicationâ€¦"
	@rm -rf dist && mkdir dist
	@cp ../../../target/release/cacvote-server dist/cacvote-server
	@echo "- \e[34;4mdist/cacvote-server\e[0m: application binary"

run:
	@echo "ğŸš€ Running application in production modeâ€¦"
	@cd dist && ./cacvote-server

reset-db:
	@echo "ğŸ—‘ï¸ Resetting databaseâ€¦"
	@cargo sqlx database reset --source db/migrations
	@echo "âœ… Database reset"
