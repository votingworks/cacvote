procs:
  cacvote-server:
    cwd: 'services/cacvote-server'
    shell: 'cargo watch -x run'

  cacvote-scan-backend:
    cwd: 'apps/cacvote-scan/backend'
    shell: 'cargo watch -x run'
  cacvote-scan-frontend:
    cwd: 'apps/cacvote-scan/frontend'
    shell: 'dx serve --port 4000'
  cacvote-scan-frontend-css:
    cwd: 'apps/cacvote-scan/frontend'
    shell: 'pnpm tailwindcss -i input.css -o ./public/styles.css --watch'

  cacvote-jx-backend:
    cwd: 'apps/cacvote-jx-terminal/backend'
    shell: 'cargo watch -x run'
  cacvote-jx-frontend:
    cwd: 'apps/cacvote-jx-terminal/frontend'
    shell: 'dx serve --port 5000'
  cacvote-jx-frontend-css:
    cwd: 'apps/cacvote-jx-terminal/frontend'
    shell: 'pnpm tailwindcss -i input.css -o ./public/styles.css --watch'

  cacvote-mark:
    cwd: 'apps/cacvote-mark/frontend'
    shell: 'pnpm tsc --build && pnpm start'

  kiosk-browser:
    cwd: '../kiosk-browser'
    shell: |
      echo "Waiting for CACVote Mark to startâ€¦"
      while ! nc -z localhost 3000; do sleep 1; done
      kiosk-browser http://localhost:3000/
